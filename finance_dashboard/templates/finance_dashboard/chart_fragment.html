<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>Chart (<span id="chartSymbol_{{ symbol }}">{{ symbol }}</span>)</span>
    </div>
    <div class="card-body">
        <!-- Biểu đồ -->
        <canvas id="chart_{{ symbol }}" height="400" style="width: 100%;"></canvas>
        <!-- Thông tin bổ sung -->
        <div class="mt-3">
            <h6>{{ symbol }} Details</h6>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong>Last:</strong> {{ details.last }}
                </li>
                <li class="list-group-item">
                    <strong>Change:</strong>
                    <span class="{% if details.change > 0 %}text-success{% else %}text-danger{% endif %}">
                        {% if details.change > 0 %}▲{% else %}▼{% endif %} {{ details.change|floatformat:2 }}%
                    </span>
                </li>
                <li class="list-group-item">
                    <strong>Volume:</strong> {{ details.volume }}
                </li>
                <li class="list-group-item">
                    <strong>High:</strong> {{ chart_data.high }}
                </li>
                <li class="list-group-item">
                    <strong>Low:</strong> {{ chart_data.low }}
                </li>
            </ul>
        </div>
    </div>
</div>
<script>
    const ctx_{{ symbol }} = document.getElementById('chart_{{ symbol }}').getContext('2d');
    new Chart(ctx_{{ symbol }}, {
        type: 'line',
        data: {
            labels: {{ chart_data.labels|safe }},
            datasets: [{
                label: '{{ symbol }}',
                data: {{ chart_data.values|safe }},
                borderWidth: 2,
                borderColor: '#0d6efd',
                fill: false,
                tension: 0.2
            }]
        },
        options: {
            responsive: true,
            plugins: { legend: { display: false } },
            scales: {
                x: { ticks: { maxRotation: 45, minRotation: 45 } },
                y: { beginAtZero: false }
            }
        }
    });
</script>